<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Checkout</title>
	<!-- for-mobile-apps -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="keywords" content="Best Store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design"/>
	<script type="application/x-javascript"> addEventListener("load", function () {
		setTimeout(hideURLbar, 0);
	}, false);

	function hideURLbar() {
		window.scrollTo(0, 1);
	} </script>
	<!-- //for-mobile-apps -->
	<link href="../static/css/bootstrap.css" rel="stylesheet" type="text/css" media="all"/>
	<link href="../static/css/style.css" rel="stylesheet" type="text/css" media="all"/>
	<!-- js -->
	<script src="../static/js/jquery.min.js"></script>
	<!-- //js -->
	<!-- cart -->
	<script src="../static/js/simpleCart.min.js"></script>
	<!-- cart -->
	<link rel="stylesheet" type="text/css" href="../static/css/jquery-ui.css">
	<!-- for bootstrap working -->
	<script type="text/javascript" src="../static/js/bootstrap-3.1.1.min.js"></script>
	<!-- //for bootstrap working -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic'
		  rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,700italic,900,900italic'
		  rel='stylesheet' type='text/css'>
	<!-- animation-effect -->
	<link href="../static/css/animate.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
	<script src="../static/js/wow.min.js"></script>
	<script>
		new WOW().init();
	</script>
	<!-- //animation-effect -->
</head>
	
<body>
<!-- header -->
	<div class="header">
		<div class="container">
			<div class="header-grid">
				<div class="header-grid-left animated wow slideInLeft" data-wow-delay=".5s">
					<ul>
						<li><i class="glyphicon glyphicon-envelope" aria-hidden="true"></i><a
								href="mailto:info@example.com">15927147398@qq.com</a></li>
						<li><i class="glyphicon glyphicon-earphone" aria-hidden="true"></i>+8615927147398</li>
						<li><i class="glyphicon glyphicon-log-in" aria-hidden="true"></i><a href="/toLogin">Login</a></li>
						<li><i class="glyphicon glyphicon-book" aria-hidden="true"></i><a href="/toRegister">Register</a>
						</li>
					</ul>
				</div>
                <div class="header-grid-right animated wow slideInRight" data-wow-delay=".5s">
                    <img src="../static/images/jm.jpg" style="width:44px; height:44px; border-radius:50%;"><span> </span><span th:text="${session.USER_INFO==null? '请登录':(session.USER_INFO.getNickname()+'已登录')}"></span>
                </div>
				<div class="clearfix"> </div>
			</div>
			<div class="logo-nav">
				<div class="logo-nav-left animated wow zoomIn" data-wow-delay=".5s">
					<h1><a th:href="@{/toIndex}">Best Store <span>Shop anywhere</span></a></h1>
				</div>
				<div class="logo-nav-left1">
					<nav class="navbar navbar-default">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header nav_2">
						<button type="button" class="navbar-toggle collapsed navbar-toggle1" data-toggle="collapse"
								data-target="#bs-megadropdown-tabs">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse" id="bs-megadropdown-tabs">
						<ul class="nav navbar-nav">
							<li><a th:href="@{/toIndex}">Home</a></li>
							<!-- Mega Menu -->
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Products <b
										class="caret"></b></a>
								<ul class="dropdown-menu multi-column columns-3">
									<div class="row">
										<div class="col-sm-4">
											<ul class="multi-column-dropdown">
												<h6>Men's Wear</h6>
												<li><a href="/toProducts?suitablePeople=men&type=jacket&pageNum=1">jacket</a></li>
												<li><a href="/toProducts?suitablePeople=men&type=trousers&pageNum=1">trousers</a>
												</li>
												<li><a href="/toProducts?suitablePeople=men&type=shoe&pageNum=1">shoe</a></li>
												<li><a href="/toProducts?suitablePeople=men&type=ornament&pageNum=1">ornament</a>
												</li>
											</ul>
										</div>
										<div class="col-sm-4">
											<ul class="multi-column-dropdown">
												<h6>Women's Wear</h6>
												<li><a href="/toProducts?suitablePeople=women&type=jacket&pageNum=1">jacket</a>
												</li>
												<li><a href="/toProducts?suitablePeople=women&type=trousers&pageNum=1">trousers</a>
												</li>
												<li><a href="/toProducts?suitablePeople=women&type=shoe&pageNum=1">shoe</a></li>
												<li><a href="/toProducts?suitablePeople=women&type=ornament&pageNum=1">ornament</a>
												</li>
											</ul>
										</div>
										<div class="col-sm-4">
											<ul class="multi-column-dropdown">
												<h6>Kid's Wear</h6>
												<li><a href="/toProducts?suitablePeople=kid&type=jacket&pageNum=1">jacket</a></li>
												<li><a href="/toProducts?suitablePeople=kid&type=trousers&pageNum=1">trousers</a>
												</li>
												<li><a href="/toProducts?suitablePeople=kid&type=shoe&pageNum=1">shoe</a></li>
												<li><a href="/toProducts?suitablePeople=kid&type=ornament&pageNum=1">ornament</a>
												</li>
											</ul>
										</div>
										<div class="clearfix"></div>
									</div>
								</ul>
							</li>
							<li class="dropdown">
								<ul class="dropdown-menu multi-column columns-3">
									<div class="row">
										<div class="col-sm-4">
											<ul class="multi-column-dropdown">
												<h6>Home Collection</h6>
												<li><a href="/toFurniture">Cookware</a></li>
												<li><a href="/toFurniture">Sofas</a></li>
												<li><a href="/toFurniture">Dining Tables</a></li>
												<li><a href="/toFurniture">Shoe Racks</a></li>
												<li><a href="/toFurniture">Home Decor</a></li>
											</ul>
										</div>
										<div class="col-sm-4">
											<ul class="multi-column-dropdown">
												<h6>Office Collection</h6>
												<li><a href="/toFurniture">Carpets</a></li>
												<li><a href="/toFurniture">Tables</a></li>
												<li><a href="/toFurniture">Sofas</a></li>
												<li><a href="/toFurniture">Shoe Racks</a></li>
												<li><a href="/toFurniture">Sockets</a></li>
												<li><a href="/toFurniture">Electrical Machines</a></li>
											</ul>
										</div>
										<div class="col-sm-4">
											<ul class="multi-column-dropdown">
												<h6>Decorations</h6>
												<li><a href="/toFurniture">Toys</a></li>
												<li><a href="/toFurniture">Wall Clock</a></li>
												<li><a href="/toFurniture">Lighting</a></li>
												<li><a href="/toFurniture">Top Brands</a></li>
											</ul>
										</div>
										<div class="clearfix"></div>
									</div>
								</ul>
							</li>
							<li><a href="/toShortCodes">Short Codes</a></li>
							<li><a href="/toEmail">Mail Us</a></li>
						</ul>
					</div>
				</nav>
			</div>
			<div class="logo-nav-right">
				<div class="search-box">
					<div id="sb-search" class="sb-search">
						<form>
							<input class="sb-search-input" placeholder="Enter your search term..." type="search"
								   id="search">
							<input class="sb-search-submit" type="submit" value="">
							<span class="sb-icon-search"> </span>
						</form>
					</div>
				</div>
				<!-- search-scripts -->
				<script src="../static/js/classie.js"></script>
				<script src="../static/js/uisearch.js"></script>
				<script>
					new UISearch(document.getElementById('sb-search'));
				</script>
				<!-- //search-scripts -->
			</div>
			<div class="header-right">
				<div class="cart box_1">
					<a th:href="@{/toCheckout}">
						<h3>
							<img src="../static/images/bag.png" alt=""/>
							<div class="total">
								<span>shopping cart</span>
							</div>

						</h3>
					</a>
					<!--<p><a href="javascript:;" class="simpleCart_empty">Empty Cart</a></p>-->
					<div class="clearfix"></div>
				</div>
			</div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>
<!-- //header -->
<!-- breadcrumbs -->
<div class="breadcrumbs">
	<div class="container">
		<ol class="breadcrumb breadcrumb1 animated wow slideInLeft" data-wow-delay=".5s">
			<li><a th:href="@{toIndex}"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>Home</a></li>
			<li class="active">Checkout Page</li>
		</ol>
	</div>
</div>
<!-- //breadcrumbs -->
<!-- checkout -->
<div class="checkout">
	<div class="container">
		<h3 class="animated wow slideInLeft" data-wow-delay=".5s">Your shopping cart contains: <span><span
				th:text="${PAGEINFO.getTotal()}"></span> Products</span>
		</h3>
		<div class="checkout-right animated wow slideInUp" data-wow-delay=".5s">
			<table class="timetable_sub" id="table" th:if="${PAGEINFO.getSize()!=0}">
				<thead>
				<tr>
					<!--<th><input type="checkbox" value="true" id="ckb" class="mycheckbox"></th>-->
					<th>SL No.</th>
					<th>Product</th>
					<th>Quality</th>
					<th>Product Name</th>
					<th>Service Charges</th>
					<th>Price</th>
					<th>Remove</th>
				</tr>
				</thead>
				<tr class="rem1" th:each="item,items : ${ITEM_LIST_SHOPPING}">
					<td th:text="${item.shoppingCartId}" hidden class="shoppingId"></td>
					<!--<td><input type="checkbox" value="true" class="mycheckbox"></td>-->
					<td class="invert" th:text="${(PAGEINFO.getPageNum()-1)*3+items.count}"></td>
					<td class="invert-image"><a th:href="@{/toSingle(id=${item.getId()},size=${item.getSize()},color=${item.getColor()})}"><img th:src="@{item.image}" alt=" "
																																				class="img-responsive"/></a></td>

					<td class="invert">
						<div class="quantity">
							<div class="quantity-select">
								<div class="entry value-minus">&nbsp;</div>
								<div class="entry value"><span th:text="${item.number}"></span></div>
								<div class="entry value-plus active">&nbsp;</div>
							</div>
						</div>
					</td>
					<td class="invert"><span th:text="${item.name}"></span></td>
					<td class="invert">$<span>5.0</span></td>
					<td class="invert">$<span th:text="${item.price}"></span></td>
					<td class="invert">
						<div class="rem">
							<div class="close1"></div>
						</div>
						<script>
							$(document).ready(function (c) {
								$('.close1').each(function () {
									$(this).on('click', function (c) {
										var $shoppingCartId = $(this).parent().parent().parent().find('.shoppingId').text()
										var $tr = $(this).parent().parent().parent()
										swal({
											title: "Are you sure!",
											text: "",
											type: "warning",

											showConfirmButton: true,
											confirmButtonText: 'yes',
											confirmButtonColor: "#dd6b55",

											showCancelButton: true,//是否显示取消按钮
											cancelButtonText: 'no',//按钮内容
											cancelButtonColor: '#b9b9b9',

											closeOnConfirm: true,//点击返回上一步操作
											closeOnCancel: true
										}, function () {
											var pageNumber = [[${PAGEINFO.getPageNum()}]]
											var pageSize = [[${PAGEINFO.getPageSize()}]]
											$.post("/removeShoppingCart", {
												shoppingCartId: $shoppingCartId,
												pageNum: pageNumber
											}, function (data) {
												if (data.reslut) {
													$tr.fadeOut('slow', function (c) {
														$tr.remove();
														window.location.reload()
													});
													return;
												}
											})
										});

									});
								})
								;
								$(function () {
									$("#ckb").click(function () {
										if ($("#ckb").attr("checked") == "checked") {
											$('.mycheckbox').each(function () {
												$(this).attr('checked', "checked");
											});
										} else {
											$('.mycheckbox').each(function () {
												$(this).attr('checked', false);
											});
										}
									})
									// var len = 0;
									// $('.mycheckbox').each(function () {
									//
									//     $('.mycheckbox').each(function () {
									//         if ($(this).attr("checked") == "checked") {
									//             len = len + 1;
									//         }
									//     })
									//     $(this).click(function () {
									//         if ($(this).attr("checked") != "checked") {
									//             $("#ckb").attr("checked", false)
									//         }
									//         else if ($(".mycheckbox").length() == len) {
									//             $("#ckb").attr("checked", "checked")
									//         }
									//     })
									// });
								})
							});
						</script>
					</td>
				</tr>
				<!--quantity-->
				<script>
					$(".value-plus").each(function () {
						$(this).on('click', function () {
							var $this = $(this)
							var $shoppingId = $(this).parent().parent().parent().parent().find('.shoppingId').text()
							var num = parseInt($(this).parent().find('.value').text())
							$.post("/setItemNumber", {shoppingId: $shoppingId, number: num, result: 1},
									function (data) {
										if (data.reslut) {
											var divUpd = $this.parent().find('.value'),
													newVal = parseInt(divUpd.text(), 10) + 1;
											divUpd.text(newVal);
											window.location.reload()
										}
									});
						});
					})

					$(".value-minus").each(function () {
						$(this).on('click', function () {
							var $this = $(this)
							var $shoppingId = $(this).parent().parent().parent().parent().find('.shoppingId').text()
							var num = parseInt($(this).parent().find('.value').text())
							$.post("/setItemNumber", {shoppingId: $shoppingId, number: num, result: 2},
									function (data) {
										if (data.reslut) {
											var divUpd = $this.parent().find('.value'),
													newVal = parseInt(divUpd.text(), 10) - 1;
											if (newVal >= 1) divUpd.text(newVal);
											window.location.reload()
										} else {
											swal("Operation failure! ", "Please click the delete key", 'error');
										}
									})
						});
					})
				</script>
				<!--quantity-->
			</table>
			<nav id="page" th:if="${PAGEINFO.getSize()!=0}" aria-label="Page navigation" style="position: absolute;float: right; right: 0px">
				<ul class="pagination">
					<li id="up">
						<a id="up_a" th:href="@{/toCheckout(pageNum=${PAGEINFO.getPageNum()}-1)}"

						   aria-label="Previous"
						>
							<span aria-hidden="true">&laquo;</span>
						</a>
					</li>
					<li th:each="num,nums:${PAGEINFO.getNavigatepageNums()}">
						<a th:if="${num==PAGEINFO.getPageNum()}" href="#" th:text="${num}" class="index"></a>
						<a th:if="${num!=PAGEINFO.getPageNum()}" th:href="@{/toCheckout(pageNum=${num})}"

						   th:text="${num}"></a>
					</li>

					<li id="down">
						<a id="down_a" th:href="@{/toCheckout(pageNum=${PAGEINFO.getPageNum()}+1)}"
						   aria-label="Next"
						>
							<span aria-hidden="true">&raquo;</span>
						</a>
					</li>
				</ul>
				<script th:inline="javascript">
					var pageNum = [[${PAGEINFO.getPageNum()}]]
					var firstPage = [[${PAGEINFO.isIsFirstPage()}]];
					var lastPage = [[${PAGEINFO.isIsLastPage()}]];
					if (firstPage) {
						$("#up").attr("class", "disabled")
						$("#up_a").attr("href", "javascript:;")
					}
					if (lastPage) {
						$("#down").attr("class", "disabled")
						$("#down_a").attr("href", "javascript:;")
					}
					$(".index").each(function () {
						if ($(this).text() == pageNum) {
							$(this).parent().attr("class", "active")
						}
					})
				</script>
			</nav>
		</div>
		<div id="h" th:if="${PAGEINFO.getSize()==0}" class="checkout-right animated wow slideInUp text-center"
			 data-wow-delay=".5s">
			<p style="font-size: 38px;color: #FFC22A">Absolutely empty!</p>
		</div>
		<!--<script>-->
		<!--var pageSize = [[${PAGEINFO.getPageSize()}]]-->
		<!--$(function () {-->
		<!--if (pageSize == 0) {-->
		<!--$("#table").css("display", "none")-->
		<!--$("#page").css("display", "none")-->
		<!--$("#h").removeAttr("hidden")-->
		<!--}-->
		<!--})-->
		<!--</script>-->
		<div class="checkout-left">
			<div class="checkout-left-basket animated wow slideInLeft" data-wow-delay=".5s">
				<h4>Continue to basket</h4>
				<ul th:each="item,items : ${ITEM_LIST_SHOPPING}">
					<li>Product <i th:text="${items.count}"></i> <i>-</i> <span class="price"
					><l class="prices" th:text="${item.getPrice()*item.getNumber()}"></l></span>
					</li>
				</ul>
				<ul>
					<li>Total Service Charges <i>-</i> <span
					><l id="service" th:text="${ITEM_LIST_SHOPPING.size()*5.0}"></l></span></li>
					<li>Total <i>-</i><span id="allPrices"></span></li>
				</ul>
				<script>
					var prices = 0;
					$(".price").each(function () {
						prices += parseFloat($(this).text())
					})
					prices += parseFloat($("#service").text())
					$("#allPrices").text(parseFloat(prices))
				</script>
				<button id="payment" class="btn btn-warning">Payment</button>
				<script>
					var shoppingIds = new Array();
					$(".shoppingId").each(function () {
						shoppingIds.push(parseInt($(this).text()))
					})
					$("#payment").click(function () {
						$.ajax({
							url: '/payment',
							data: {shoppingCartIdList: shoppingIds},
							type: 'post',
							traditional: true,
							dataType: "json",
							success: function (r) {
								if (r.reslut) {
									swal({
										title: "Payment success",
										type: "success",
										confirmButtonText: "OK",
										closeOnConfirm: false
									}, function () {
										window.location.reload()
									});
								}
							}
						});
					})
				</script>
			</div>
			<div class="checkout-right-basket animated wow slideInRight" data-wow-delay=".5s">
				<a><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>Continue
					Shopping</a>
			</div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>
<!-- //checkout -->
<!-- footer -->
<div class="footer">
	<div class="container">
		<div class="footer-grids">
			<div class="col-md-3 footer-grid animated wow slideInLeft" data-wow-delay=".5s">
				<h3>About Us</h3>
				<p>Duis aute irure dolor in reprehenderit in voluptate velit esse.<span>Excepteur sint occaecat cupidatat
						non proident, sunt in culpa qui officia deserunt mollit.</span></p>
			</div>
			<div class="col-md-3 footer-grid animated wow slideInLeft" data-wow-delay=".6s">
				<h3>Contact Info</h3>
				<ul>
					<li><i class="glyphicon glyphicon-map-marker" aria-hidden="true"></i>1234k Avenue, 4th block, <span>New York City.</span>
					</li>
					<li><i class="glyphicon glyphicon-envelope" aria-hidden="true"></i><a
							href="mailto:info@example.com">info@example.com</a></li>
					<li><i class="glyphicon glyphicon-earphone" aria-hidden="true"></i>+1234 567 567</li>
				</ul>
			</div>
			<div class="col-md-3 footer-grid animated wow slideInLeft" data-wow-delay=".7s">
				<h3>Flickr Posts</h3>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/13.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/14.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/15.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/16.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/13.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/14.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/15.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/16.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/13.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/14.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/15.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="footer-grid-left">
					<a href="single.html"><img src="../static/images/16.jpg" alt=" " class="img-responsive"/></a>
				</div>
				<div class="clearfix"></div>
			</div>
			<div class="col-md-3 footer-grid animated wow slideInLeft" data-wow-delay=".8s">
				<h3>Blog Posts</h3>
				<div class="footer-grid-sub-grids">
					<div class="footer-grid-sub-grid-left">
						<a href="single.html"><img src="../static/images/9.jpg" alt=" " class="img-responsive"/></a>
					</div>
					<div class="footer-grid-sub-grid-right">
						<h4><a href="single.html">culpa qui officia deserunt</a></h4>
						<p>Posted On 25/3/2016</p>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="footer-grid-sub-grids">
					<div class="footer-grid-sub-grid-left">
						<a href="single.html"><img src="../static/images/10.jpg" alt=" " class="img-responsive"/></a>
					</div>
					<div class="footer-grid-sub-grid-right">
						<h4><a href="single.html">Quis autem vel eum iure</a></h4>
						<p>Posted On 25/3/2016</p>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<div class="clearfix"></div>
		</div>
		<div class="footer-logo animated wow slideInUp" data-wow-delay=".5s">
			<h2><a href="index.html">Best Store <span>shop anywhere</span></a></h2>
		</div>
		<!--<div class="copy-right animated wow slideInUp" data-wow-delay=".5s">-->
			<!--<p>Copyright &copy; 2016.Company name All rights reserved.More Templates <a href="http://www.cssmoban.com/"-->
																						<!--target="_blank" title="模板之家">模板之家</a>-->
				<!-- - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>-->
		<!--</div>-->
	</div>
</div>
<!-- //footer -->

</body>
</html>